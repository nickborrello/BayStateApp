name: "petfoodex"
# Test SKUs: Pet Food Experts item numbers
test_skus: [
  "33011808",  # Pet Food Experts product
  "10158320",  # Pet food product
  "10132100",  # Pet food product
  "10012345",  # Pet product
  "20456789",  # Pet product
  "30987654",  # Pet product
]
fake_skus: ["xyzabc123notexist456", "00000000", "99999999"]
edge_case_skus: ["1", "1234567890123"]  # Very short and very long
base_url: "https://www.petfoodexperts.com"
timeout: 15
retries: 2
image_quality: 20

selectors:
  - name: "Name"
    selector: "h1"
    attribute: "text"
  - name: "Attributes"
    selector: "[data-test-selector='productDetails_specifications'] li"
    attribute: "text"
  - name: "Image URLs"
    selector: "img[data-test-selector='productDetails_mainImage']"
    attribute: "src"
    multiple: true

workflows:
  - action: "login"
  - action: "navigate"
    params:
      url: "https://orders.petfoodexperts.com/Search?query={sku}"
  - action: "wait"
    params:
      seconds: 3
  - action: "wait_for"
    params:
      selector: "h1, h2, [data-test-selector='page_ProductDetailsPage'], body"
      timeout: 5
  - action: "wait"
    params:
      seconds: 2
  - action: "check_no_results"
  - action: "conditional_skip"
    params:
      if_flag: "no_results_found"
  - action: "extract"
    params:
      fields: ["Name", "Attributes", "Image URLs"]
  - action: "transform_value"
    params:
      source_field: "Attributes"
      target_field: "Brand"
      regex: "Brand:\\s*([^\\n]+)"
  - action: "transform_value"
    params:
      source_field: "Attributes"
      target_field: "Weight"
      regex: "Weight:\\s*([^\\n]+)"
  - action: "transform_value"
    params:
      field: "Image URLs"
      transformations:
        - type: "replace"
          pattern: "_md"
          replacement: "_lg"

login:
  url: "https://orders.petfoodexperts.com/SignIn"
  username_field: "#userName"
  password_field: "#password"
  submit_button: "button[data-test-selector='signIn_submit']"
  success_indicator: "[data-test-selector='header_userName']"
  timeout: 20

anti_detection:
  enable_captcha_detection: false
  enable_rate_limiting: false
  enable_human_simulation: false
  enable_session_rotation: false
  enable_blocking_handling: false
  rate_limit_min_delay: 1.0
  rate_limit_max_delay: 3.0
  session_rotation_interval: 100
  max_retries_on_detection: 3

validation:
  no_results_selectors:
    - "//h2[contains(., '0 item')]"
    - "//h2[contains(., '0 items')]"
